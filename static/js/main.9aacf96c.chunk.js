(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(22),i=n.n(s),l=n(7),o=n(16),u=n(39),d=n(40),j=n(17),b=n(10),h="SHOW_ALERT",m="HIDE_ALERT",p=n(6),x="ADD_CITY_WEATHER",O="REMOVE_CITY_WEATHER",f={cities:JSON.parse(localStorage.getItem("cities"))||[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(b.a)(Object(b.a)({},e),{},{cities:[].concat(Object(p.a)(e.cities),[t.payload])});case O:return Object(b.a)(Object(b.a)({},e),{},{cities:e.cities.filter((function(e){return e!==t.payload}))});default:return e}},w=Object(j.combineReducers)({cities:v,alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{visible:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(b.a)(Object(b.a)({},t.payload),{},{visible:!0});case m:return{visible:!1};default:return e}}}),g=Object(j.createStore)(w,Object(d.composeWithDevTools)(Object(j.applyMiddleware)(u.a))),y=function(e){var t=e.children;return Object(c.jsx)(l.a,{store:g,children:Object(c.jsx)(o.a,{children:t})})},N=n(4),k=n(2),C=n.n(k),S=n(5),D=n(13),E=function(e,t){return{type:h,payload:{text:e,type:t}}},T=function(){return{type:m}},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return function(n){n(E(e,t)),setTimeout((function(){return n(T())}),5e3)}},A=n(41),F={baseUrl:"https://api.openweathermap.org/data/2.5"},I=n.n(A).a.create({baseURL:F.baseUrl}),H="8a998b07d89e5ba53ce3e3bd8259c2fd";I.interceptors.request.use((function(e){return e.headers=Object(b.a)({},e.headers),e}),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){return e}),(function(e){return g.dispatch(W(e.response.data.message)),Promise.reject(e)}));var R=function(){var e=Object(S.a)(C.a.mark((function e(t){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/weather?q=".concat(t,"&units=metric&appid=").concat(H));case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(S.a)(C.a.mark((function e(t){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/weather?id=".concat(t,"&units=metric&appid=").concat(H));case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(S.a)(C.a.mark((function e(t,n){var c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/onecall?lat=".concat(t,"&lon=").concat(n,"&exclude=current,minutely,daily&units=metric&appid=").concat(H));case 2:return c=e.sent,r=c.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(e){var t=e.cityID,n=Object(l.b)(),a=Object(r.useState)([]),s=Object(D.a)(a,2),i=s[0],u=s[1],d=function(){var e=Object(S.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:n=e.sent,u(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(i.id);case 2:n(W("Data updated","success"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d(t)}),[t]);var b,h=i.weather&&"http://openweathermap.org/img/w/"+i.weather[0].icon+".png";return Object(c.jsx)("div",{className:"col mb-3",children:Object(c.jsxs)("div",{className:"card h-100 border-dark text-center",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsx)("h4",{children:i.name})}),Object(c.jsxs)("div",{className:"card-body bg-dark text-white",children:[Object(c.jsx)("div",{className:"card-text",children:i.weather&&Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:i.weather[0].main}),Object(c.jsx)("img",{src:h,alt:i.weather[0].description,title:i.weather[0].description})]})}),i.main&&Object(c.jsxs)("h3",{className:"card-text",children:[(b=i.main.temp,"-0"===b.toFixed()?0:b.toFixed())," \xb0C"]}),i.wind&&Object(c.jsxs)("p",{className:"card-text",children:["Wind Speed: ",i.wind.speed," m/s"]}),Object(c.jsx)("p",{className:"card-text",children:Object(c.jsxs)("small",{children:["Time of data calculation:",Object(c.jsx)("br",{}),new Date(1e3*i.dt).toLocaleString()]})})]}),Object(c.jsxs)("div",{className:"card-footer",children:[Object(c.jsx)("button",{className:"btn btn-warning btn-sm w-50",onClick:function(){return j()},children:"Update"}),Object(c.jsx)("button",{className:"btn btn-danger btn-sm w-50",onClick:function(){return n(function(e){return{type:O,payload:e}}(t))},children:"Delete"}),Object(c.jsx)(o.b,{to:"/"+i.name,children:Object(c.jsx)("button",{className:"btn btn-outline-dark btn-sm w-100",children:"More information"})})]})]})})},P=function(e){return e.cities},U=function(){var e=Object(l.c)(P).cities;return e.length?Object(c.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:e.map((function(e,t){return Object(c.jsx)(M,{cityID:e},e+""+t)})).reverse()}):Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)("h4",{children:"No cities."}),Object(c.jsx)("p",{children:"Please, add city."})]})},J=function(){return Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("div",{className:"spinner-border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})},V=(n(73),function(e){var t=e.hourlyWeatherData,n=e.fixedValue,r=e.backgroundColorTemperature;return Object(c.jsxs)("div",{className:"row no-gutters",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("h4",{className:"text-center",children:"Hourly temperature"})}),Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("ul",{className:"temp mb-5",children:t.hourly&&t.hourly.map((function(e,t){return t<20&&Object(c.jsxs)("li",{className:"temp-item",style:{width:"5%"},children:[Object(c.jsx)("span",{className:"temp-item-value",style:{top:50-e.temp+"%",backgroundColor:r(e.temp)},children:n(e.temp)}),Object(c.jsx)("span",{className:"temp-item-time",children:new Date(1e3*e.dt).getHours()+":00"})]},t)}))})})]})}),q=function(){var e=Object(l.b)(),t=Object(N.h)().city,n=Object(r.useState)({}),a=Object(D.a)(n,2),s=a[0],i=a[1],o=Object(r.useState)({}),u=Object(D.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(!0),h=Object(D.a)(b,2),m=h[0],p=h[1],x=function(){var e=Object(S.a)(C.a.mark((function e(){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,i(n),e.next=6,L(n.coord.lat,n.coord.lon);case 6:c=e.sent,j(c),p(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var n=Object(S.a)(C.a.mark((function n(){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(t);case 2:e(W("Data updated","success"));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(r.useEffect)((function(){x()}),[t]);var f=function(e){return"-0"===e.toFixed()?0:e.toFixed()},v=s.weather&&"http://openweathermap.org/img/w/"+s.weather[0].icon+".png";return m?Object(c.jsx)(J,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"row no-gutters mb-3",children:[Object(c.jsx)("div",{className:"col-12",children:Object(c.jsxs)("h4",{className:"text-center mb-3",children:["Weather in ",s.name]})}),Object(c.jsxs)("div",{className:"col-12 bg-dark text-center text-white",children:[s.main&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("p",{className:"display-4",children:f(s.main.temp)+" \xb0C"}),Object(c.jsx)("p",{className:"badge badge-secondary",children:"Feel like: "+s.main.feels_like.toFixed()+" \xb0C"})]}),s.weather&&Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:s.weather[0].main}),Object(c.jsx)("img",{src:v,alt:s.weather[0].description,title:s.weather[0].description})]}),Object(c.jsxs)("ul",{className:"list-inline",children:[s.main&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("li",{className:"list-inline-item mr-4",children:["Humidity ",Object(c.jsx)("br",{})," ",s.main.humidity+" %"]}),Object(c.jsxs)("li",{className:"list-inline-item mr-4",children:["Pressure ",Object(c.jsx)("br",{})," ",s.main.pressure+" hPa"]})]}),s.wind&&Object(c.jsxs)("li",{className:"list-inline-item",children:["Wind Speed ",Object(c.jsx)("br",{})," ",s.wind.speed+" m/s"]})]})]})]}),Object(c.jsx)(V,{hourlyWeatherData:d,fixedValue:f,backgroundColorTemperature:function(e){return 1===Math.sign(f(e))?"orange":-1===Math.sign(f(e))?"skyblue":"grey"}}),Object(c.jsx)("div",{className:"row no-gutters",children:Object(c.jsxs)("div",{className:"col-12 text-center",children:[Object(c.jsxs)("p",{className:"bg-dark text-white",children:["Time of data calculation:"," ",new Date(1e3*s.dt).toLocaleString()]}),Object(c.jsx)("button",{className:"btn btn-secondary",onClick:function(){return O(t)},children:"Update weather"})]})})]})},Y=function(){return Object(c.jsxs)(N.d,{children:[Object(c.jsx)(N.b,{exact:!0,path:"/",children:Object(c.jsx)(U,{})}),Object(c.jsx)(N.b,{exact:!0,path:"/:city",children:Object(c.jsx)(q,{})}),Object(c.jsx)(N.a,{to:"/"})]})},B=function(e){return e.alert},z=function(){var e=Object(l.b)(),t=Object(l.c)(B);return t.visible&&Object(c.jsxs)("div",{className:"alert alert-".concat(t.type||"warning"," alert-dismissible mt-3"),children:[Object(c.jsx)("strong",{children:"Attention!"})," ",t.text,Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(){return e(T())},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})},G=n(42),K=n(43),Q=a.a.forwardRef((function(e,t){var n=e.onChange,r=Object(K.a)(e,["onChange"]);return Object(c.jsx)("input",Object(b.a)(Object(b.a)({},r),{},{ref:t,onChange:n}))})),X=function(){var e=Object(l.b)(),t=Object(l.c)(P).cities,n=Object(N.g)(),a=Object(G.a)(),s=a.register,i=a.handleSubmit,u=a.setValue;Object(r.useEffect)((function(){localStorage.setItem("cities",JSON.stringify(t))}),[t]);var d=function(){var n=Object(S.a)(C.a.mark((function n(c){var r,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=c.city){n.next=4;break}return e(W("Enter city")),n.abrupt("return");case 4:return n.prev=4,n.next=7,R(r);case 7:a=n.sent,t.some((function(e){return e===a.id}))?e(W("City exists")):(e((s=a.id,{type:x,payload:s})),u("city","")),n.next=14;break;case 12:n.prev=12,n.t0=n.catch(4);case 14:case"end":return n.stop()}var s}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(c.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark mb-3",children:[Object(c.jsx)(o.c,{to:"/",exact:!0,className:"navbar-brand",children:"Weather App"}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(c.jsx)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.c,{to:"/",exact:!0,className:"nav-link",activeClassName:"active",children:"Home"})})}),"/"===n.pathname&&Object(c.jsx)("form",{onSubmit:i(d),children:Object(c.jsxs)("div",{className:"form-inline",children:[Object(c.jsx)(Q,{className:"form-control",type:"text",name:"city",placeholder:"Add new city",ref:s()}),Object(c.jsx)("button",{className:"btn btn-warning",type:"submit",children:"Add"})]})})]})]})},Z=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(X,{}),Object(c.jsx)(z,{}),Object(c.jsx)(Y,{})]})};var $=function(){return Object(c.jsx)(y,{children:Object(c.jsx)(Z,{})})};n(74);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.9aacf96c.chunk.js.map